{
  "kind": "build_request",
  "title": "Add custom domain setup flow for the deployed site",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a Custom Domain setup screen/section in the frontend that lets the user enter (a) their desired domain (e.g., example.com) and (b) the deployed frontend canister ID, and then displays clear step-by-step instructions for configuring DNS to point the domain to the Internet Computer-hosted site.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Your final site is ready to share now — want to add a custom domain next?",
          "Yes"
        ]
      },
      "acceptanceCriteria": [
        "A visible navigation entry or in-page section labeled \"Custom Domain\" exists in the app.",
        "The user can input a domain and a canister ID.",
        "The UI renders step-by-step DNS guidance after inputs are provided, written in English, including record types and placeholders populated with the user-provided values.",
        "The UI includes a short \"Verify\" checklist describing how the user can confirm the domain is live (e.g., wait for DNS propagation, test in browser)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure the app continues to work correctly when served from a custom domain by avoiding hard-coded origins and keeping share-link functionality based on the current browser URL.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "want to add a custom domain next?"
        ]
      },
      "acceptanceCriteria": [
        "Share/copy-link behavior uses the current page URL at runtime (works on both the default canister URL and a custom domain).",
        "No hard-coded canister-domain hostnames are introduced into user-facing link generation."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under frontend/src/components/ui (compose them instead).",
    "Do not edit immutable hook/bootstrap files listed in SYSTEM_CONTEXT (frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx).",
    "Backend must remain single-actor (all Motoko logic in backend/main.mo); only add migration.mo if an existing stable state schema must change."
  ],
  "nonGoals": [
    "Purchasing a domain or performing registrar actions automatically.",
    "Automatically detecting the user’s registrar/DNS provider UI.",
    "Implementing non-Internet-Identity third-party authentication."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}